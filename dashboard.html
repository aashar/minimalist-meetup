<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Minimalist Meetup</title>
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
<script type="text/javascript">
function getAccessToken( ) {
	var res1 = window.location.href.replace("#","?");
	return new URL(res1).searchParams.get('access_token');
}

function jsonCallback(json){
  console.log(json);
  document.getElementById("response").innerHTML = "<textarea rows='100' cols='100'>" + json + "</textarea>";
}

function send()
{
    var URL = "https://api.meetup.com/dashboard?access_token=" + getAccessToken();

   	$.ajax({
   	  url: URL, dataType: "jsonp", jsonpCallback: "jsonCallback"
   	});

//    var xmlhttp = new XMLHttpRequest();
//    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
//    xmlhttp.open("GET", URL, true);
//    xmlhttp.setRequestHeader("Content-Type", "application/json");
//    xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
//    alert(xmlhttp.responseText);
//    document.getElementById("response").innerHTML = xmlhttp.statusText + ":" + xmlhttp.status + "<BR><textarea rows='100' cols='100'>" + xmlhttp.responseText + "</textarea>";
}

function callbackFunction(xmlhttp) 
{
	alert("Access Token:" + getAccessToken());
    alert("Callback:" + xmlhttp.responseXML);
    document.getElementById("response").innerHTML = xmlhttp.statusText + ":" + xmlhttp.status + "<BR><textarea rows='100' cols='100'>" + xmlhttp.responseText + "</textarea>";
}
</script>
</head>
<body>
	<h1>Minimalist Meetup</h1>
	<p><a href="javascript:send()">Get Dashboard</a></p>
	<p><div id="response"></div></p>
</body>
</html>
